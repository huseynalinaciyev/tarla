<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tarla Oyunu - Geni≈ül…ôndirilmi≈ü Versiya</title>
<style>
  body { font-family: Arial, sans-serif; background: #e6f0d9; padding: 20px; }
  h1 { text-align: center; color: #2e7d32; margin-bottom: 10px; }
  #game { max-width: 700px; margin: auto; background: #a5d6a7; padding: 20px; border-radius: 15px; }
  #fields { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-bottom: 20px; }
  .field {
    width: 130px; height: 130px; background: #4caf50; border-radius: 12px;
    display: flex; align-items: center; justify-content: center; flex-direction: column;
    color: white; font-weight: bold; cursor: pointer; position: relative;
    user-select: none;
  }
  .field.locked {
    background: #8bc34a99;
    cursor: not-allowed;
  }
  .field img {
    width: 70px; height: 70px; margin-bottom: 5px;
  }
  #controls {
    text-align: center;
    margin-bottom: 15px;
  }
  select, button {
    padding: 8px 12px;
    margin: 0 5px 10px 5px;
    border-radius: 8px;
    border: none;
    font-weight: bold;
    cursor: pointer;
  }
  button:disabled {
    background-color: #a5d6a7;
    cursor: not-allowed;
  }
  #status {
    min-height: 24px;
    font-weight: bold;
    color: #1b5e20;
    margin-bottom: 15px;
    text-align: center;
  }
  #inventory {
    background: #81c784cc;
    padding: 15px;
    border-radius: 10px;
    font-weight: bold;
  }
  #inventory p {
    margin: 5px 0;
  }
</style>
</head>
<body>

<h1>Tarla Oyunu</h1>

<div id="game">
  <div id="fields"></div>

  <div id="controls">
    <select id="seedSelect" disabled>
      <option value="">Bitki se√ß</option>
    </select>
    <button id="btnPlant" disabled>Ekin ∆èkm…ôk üå±</button>
    <button id="btnWater" disabled>Suvarmaq üíß</button>
    <button id="btnHarvest" disabled>Bi√ßm…ôk ‚úÇÔ∏è</button>
  </div>

  <div id="status"></div>

  <div id="inventory">
    <p>Coin: <span id="coin">0</span></p>
    <p>G√ºbr…ô: <span id="fertilizer">0</span></p>
    <p>Heyvanlar:</p>
    <p>Toyuq: <span id="chickenCount">0</span></p>
    <p>Dov≈üan: <span id="rabbitCount">0</span></p>
    <button id="btnBuyChicken">Toyuq Al (50 coin)</button>
    <button id="btnBuyRabbit">Dov≈üan Al (70 coin)</button>
    <button id="btnFeedAnimals" disabled>Yem Ver (10 coin)</button>
    <button id="btnSellEggs" disabled>Yumurta Sat (5 coin h…ôr biri)</button>
    <button id="btnSellCarrots" disabled>Dov≈üan Yediyi Havu√ß Sat (7 coin h…ôr biri)</button>
  </div>
</div>

<script>
  // Bitki n√∂vl…ôri m…ôlumatƒ±
  const crops = {
    corn: {
      name: 'Qarƒüƒ±dalƒ±',
      growTime: 8000,
      stages: [
        'https://i.imgur.com/O5rXmLk.png', // toxum
        'https://i.imgur.com/eH3q3Dw.png', // c√ºc…ôrti
        'https://i.imgur.com/6bREmYY.png'  // yeti≈ümi≈ü
      ],
      price: 30
    },
    tomato: {
      name: 'Pomidor',
      growTime: 12000,
      stages: [
        'https://i.imgur.com/O5rXmLk.png',
        'https://i.imgur.com/eH3q3Dw.png',
        'https://i.imgur.com/6bREmYY.png'
      ],
      price: 50
    },
    potato: {
      name: 'Kartof',
      growTime: 15000,
      stages: [
        'https://i.imgur.com/O5rXmLk.png',
        'https://i.imgur.com/eH3q3Dw.png',
        'https://i.imgur.com/6bREmYY.png'
      ],
      price: 70
    }
  };

  // Oyun v…ôziyy…ôti
  const fieldCount = 5;
  let fields = {};
  let selectedField = null;

  let coin = 100;
  let fertilizer = 0;
  let chickenCount = 0;
  let rabbitCount = 0;
  let eggCount = 0;
  let carrotCount = 0;

  // Heyvan yem…ôy…ô dair m…ôlumat
  const feedCost = 10;

  // ƒ∞nventarƒ± yenil…ô
  function updateInventory() {
    document.getElementById('coin').innerText = coin;
    document.getElementById('fertilizer').innerText = fertilizer;
    document.getElementById('chickenCount').innerText = chickenCount;
    document.getElementById('rabbitCount').innerText = rabbitCount;
    document.getElementById('btnFeedAnimals').disabled = (chickenCount + rabbitCount) === 0 || coin < feedCost;
    document.getElementById('btnSellEggs').disabled = eggCount === 0;
    document.getElementById('btnSellCarrots').disabled = carrotCount === 0;
    document.getElementById('btnBuyChicken').disabled = coin < 50;
    document.getElementById('btnBuyRabbit').disabled = coin < 70;
  }

  // Statusu yenil…ô
  function updateStatus(text) {
    document.getElementById('status').innerText = text;
  }

  // Sah…ôl…ôri yaradƒ±b g√∂st…ôr
  function createFields() {
    const container = document.getElementById('fields');
    container.innerHTML = '';
    for(let i=1; i<=fieldCount; i++) {
      fields[i] = {
        cropType: null,
        stage: 0,
        growTimeout: null,
        fertilizerUsed: false
      };
      const div = document.createElement('div');
      div.className = 'field';
      div.id = 'field' + i;
      div.innerText = 'Bo≈ü';
      div.onclick = () => selectField(i);
      container.appendChild(div);
    }
  }

  // Sah…ôni se√ß
  function selectField(id) {
    selectedField = id;
    updateStatus(`Sah…ô ${id} se√ßildi.`);
    updateControls();
  }

  // ƒ∞dar…ôetm…ô d√ºym…ôl…ôrini yenil…ô
  function updateControls() {
    const seedSelect = document.getElementById('seedSelect');
    const btnPlant = document.getElementById('btnPlant');
    const btnWater = document.getElementById('btnWater');
    const btnHarvest = document.getElementById('btnHarvest');

    if(selectedField === null) {
      seedSelect.disabled = true;
      btnPlant.disabled = true;
      btnWater.disabled = true;
      btnHarvest.disabled = true;
      return;
    }

    const field = fields[selectedField];

    seedSelect.disabled = (field.stage !== 0);
    btnPlant.disabled = (field.stage !== 0 || seedSelect.value === "");
    btnWater.disabled = (field.stage !== 1);
    btnHarvest.disabled = (field.stage !== 3);
  }

  // Ekin …ôk
  function plant() {
    const seedSelect = document.getElementById('seedSelect');
    const cropKey = seedSelect.value;
    if(!cropKey) {
      updateStatus("∆èvv…ôlc…ô bitki se√ßin.");
      return;
    }
    if(selectedField === null) {
      updateStatus("∆èvv…ôlc…ô sah…ô se√ßin.");
      return;
    }

    const field = fields[selectedField];
    if(field.stage !== 0) {
      updateStatus("Bu sah…ôd…ô artƒ±q bitki var.");
      return;
    }

    field.cropType = cropKey;
    field.stage = 1;
    updateField(selectedField);

    updateStatus(`${crops[cropKey].name} …ôkildi.`);
    updateControls();
  }

  // Suvar
  function water() {
    if(selectedField === null) {
      updateStatus("∆èvv…ôlc…ô sah…ô se√ßin.");
      return;
    }
    const field = fields[selectedField];
    if(field.stage !== 1) {
      updateStatus("Bu sah…ôd…ô suvarmaƒüa ehtiyac yoxdur.");
      return;
    }
    field.stage = 2;
    updateField(selectedField);

    updateStatus("Tarlan suvarƒ±ldƒ±!");

    // Bitkinin yeti≈üm…ô vaxtƒ±nƒ± hesablamaq √º√ß√ºn g√ºbr…ô varsa, vaxtƒ± qƒ±salt
    let growTime = crops[field.cropType].growTime;
    if(field.fertilizerUsed) {
      growTime = Math.floor(growTime * 0.7); // 30% s√ºr…ôt artƒ±mƒ±
    }

    field.growTimeout = setTimeout(() => {
      field.stage = 3;
      updateField(selectedField);
      updateStatus(`${crops[field.cropType].name} yeti≈üdi! Bi√ßm…ôy…ô hazƒ±rdƒ±r.`);
      updateControls();
    }, growTime);

    updateControls();
  }

  // Bi√ß
  function harvest() {
    if(selectedField === null) {
      updateStatus("∆èvv…ôlc…ô sah…ô se√ßin.");
      return;
    }
    const field = fields[selectedField];
    if(field.stage !== 3) {
      updateStatus("Bitki h…ôl…ô yeti≈üm…ôyib.");
      return;
    }

    // Yeti≈ümi≈ü bitkini bi√ß
    let earning = crops[field.cropType].price;
    coin += earning;

    // Kartof v…ô pomidor kartof/k√∂k kimi g√∂t√ºr…ôk
    if(field.cropType === 'potato') carrotCount++;
    if(field.cropType === 'tomato') carrotCount++;

    field.cropType = null;
    field.stage = 0;
    if(field.growTimeout) {
      clearTimeout(field.growTimeout);
      field.growTimeout = null;
    }
    field.fertilizerUsed = false;

    updateField(selectedField);
    updateStatus(`Bitki bi√ßildi! ${earning} coin qazandƒ±n.`);
    updateInventory();
    updateControls();
  }

  // Heyvan al
  function buyChicken() {
    if(coin < 50) {
      updateStatus("Toyuq almaq √º√ß√ºn kifay…ôt q…ôd…ôr coin yoxdur.");
      return;
    }
    chickenCount++;
    coin -= 50;
    updateStatus("Toyuq alƒ±ndƒ±!");
    updateInventory();
  }

  function buyRabbit() {
    if(coin < 70) {
      updateStatus("Dov≈üan almaq √º√ß√ºn kifay…ôt q…ôd…ôr coin yoxdur.");
      return;
    }
    rabbitCount++;
    coin -= 70;
    updateStatus("Dov≈üan alƒ±ndƒ±!");
    updateInventory();
  }

  // Heyvanlara yem ver
  function feedAnimals() {
    if((chickenCount + rabbitCount) === 0) {
      updateStatus("∆èvv…ôlc…ô heyvan almalƒ±san.");
      return;
    }
    if(coin < feedCost) {
      updateStatus("Yem almaq √º√ß√ºn kifay…ôt q…ôd…ôr coin yoxdur.");
      return;
    }
    coin -= feedCost;

    // Yumurtalar v…ô havu√ßlar topla
    eggCount += chickenCount;
    carrotCount += rabbitCount;

    updateStatus("Heyvanlara yem verildi, m…ôhsullar toplandƒ±!");
    updateInventory();
  }

  // M…ôhsullarƒ± sat
  function sellEggs() {
    if(eggCount === 0) {
      updateStatus("Satmaq √º√ß√ºn yumurta yoxdur.");
      return;
    }
    const earning = eggCount * 5;
    coin += earning;
    eggCount = 0;
    updateStatus(`Yumurtalar satƒ±ldƒ±! ${earning} coin qazandƒ±n.`);
    updateInventory();
  }

  function sellCarrots() {
    if(carrotCount === 0) {
      updateStatus("Satmaq √º√ß√ºn havu√ß yoxdur.");
      return;
    }
    const earning = carrotCount * 7;
    coin += earning;
    carrotCount = 0;
    updateStatus(`Havuc satƒ±ldƒ±! ${earning} coin qazandƒ±n.`);
    updateInventory();
  }

  // Sah…ôni yenil…ô
  function updateField(id) {
    const field = fields[id];
    const div = document.getElementById('field' + id);

    if(field.stage === 0) {
      div.innerText = "Bo≈ü";
      div.style.background = "#4caf50";
    } else {
      const crop = crops[field.cropType];
      div.innerHTML = `<img src="${crop.stages[field.stage - 1]}" alt="${crop.name}" />${crop.name}`;
      if(field.stage === 3) {
        div.style.background = "#1b5e20";
      } else if(field.stage === 2) {
        div.style.background = "#388e3c";
      } else {
        div.style.background = "#81c784";
      }
    }
  }

  // Bitki n√∂vl…ôrini se√ßim list…ôsin…ô doldur
  function populateSeedSelect() {
    const select = document.getElementById('seedSelect');
    select.innerHTML = `<option value="">Bitki se√ß</option>`;
    for(const key in crops) {
      select.innerHTML += `<option value="${key}">${crops[key].name}</option>`;
    }
  }

  // Ba≈ülanƒüƒ±c
  function init() {
    createFields();
    populateSeedSelect();
    updateInventory();
    updateStatus('Oyuna xo≈ü g…ôlmisiniz! Sah…ô se√ßib bitki …ôk…ô bil…ôrsiniz.');
  }

  // Hadis…ô qulaq asƒ±cƒ±larƒ± …ôlav…ô et
  document.getElementById('btnPlant').addEventListener('click', plant);
  document.getElementById('btnWater').addEventListener('click', water);
  document.getElementById('btnHarvest').addEventListener('click', harvest);
  document.getElementById('btnBuyChicken').addEventListener('click', buyChicken);
  document.getElementById('btnBuyRabbit').addEventListener('click', buyRabbit);
  document.getElementById('btnFeedAnimals').addEventListener('click', feedAnimals);
  document.getElementById('btnSellEggs').addEventListener('click', sellEggs);
  document.getElementById('btnSellCarrots').addEventListener('click', sellCarrots);

  document.getElementById('seedSelect').addEventListener('change', updateControls);

  init();
</script>

</body>
</html>
